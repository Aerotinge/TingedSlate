feudal_governments = {

	feudal_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			muslim_government
			theocratic_feudal_government
			secular_feudal_government
			insular_feudal_government
			#chinese_imperial_government
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
		}

		color = { 91 133 207 }

		potential = {
			is_patrician = no

			NOR = {
				is_government_potential = insular_feudal_government
				is_government_potential = muslim_government
				is_government_potential = theocratic_feudal_government
				is_government_potential = tibetan_feudal_government
				is_government_potential = secular_feudal_government
				is_government_potential = roman_imperial_government
				is_government_potential = order_government
				is_government_potential = sacred_confederacy_government
				is_government_allowed = theocracy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
			
			trigger_if = {
				limit = {
					has_game_started = yes
				}
				NOT = {
					is_government_allowed = chinese_imperial_government
				}
			}
		}

		barons_need_dynasty = yes
		can_build_tribal = no
		dukes_called_kings = yes

		capital_move_delay = 600

		## Modifiers
		court_size_modifier = 10
	}
	
	insular_feudal_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			feudal_government
			muslim_government
			theocratic_feudal_government
			chinese_imperial_government
		}

		frame_suffix = "_insularfeudal"
		color = { 66 41 168 }

		potential = {
			always = no
			higher_tier_than = BARON
			has_concubinage = no
			#is_senior_consort_party = yes
			culture_group = celtic
			
			NOR = {
				is_government_potential = muslim_government
				is_government_potential = theocratic_feudal_government
				is_government_allowed = theocracy_government
			}
		}
		
		allow = {
			is_patrician = no

			NOR = {
				is_government_potential = roman_imperial_government
				is_government_potential = order_government
				is_government_potential = sacred_confederacy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
		}

		barons_need_dynasty = yes
		can_build_tribal = no
		dukes_called_kings = yes
		max_consorts = 3

		capital_move_delay = 600

		## Modifiers
		vassal_limit = -10
	}

	muslim_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			TEMPLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			feudal_government
			theocratic_feudal_government
			chinese_imperial_government
		}
		free_revoke_on_tiers = {
			DUKE
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
		}

		frame_suffix = "_iqta"
		title_prefix = "iqta_"
		color = { 10 138 57 }

		potential = {
			religion_group = muslim
		}

		allow = {
			is_patrician = no

			NOR = {
				is_government_potential = roman_imperial_government
				is_government_potential = order_government
				is_government_potential = sacred_confederacy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
		}

		allows_matrilineal_marriage = no
		barons_need_dynasty = yes
		can_build_tribal = no
		dukes_called_kings = yes
		free_retract_vassalage = yes
		free_levies_in_offensive_war = yes # Took away the hardcoded stuff for muslims where they could raise levies without pissing off vassals if in an offensive war.
		have_gender_laws = no
		uses_decadence = yes
		uses_piety_for_law_change = yes

		capital_move_delay = 600

		## Modifiers
		court_size_modifier = 10
	}
	
	theocratic_feudal_government = { # Patrimonial Theocracy
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			TEMPLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			muslim_government
			theocracy_government
			feudal_government
			chinese_imperial_government
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		free_revoke_on_governments = {
			#theocracy_government
		}
		forced_contract = {
			theocracy_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
		}

		frame_suffix = "_theocraticfeudal"
		color = { 192 192 192 }

		potential = {
			controls_religion = yes
			OR = {
				AND = {
					has_religion_feature = religion_temporal_head
					has_religion_feature = religion_dogmatic
				}
				
				trigger_if = {
					limit = { religion = norse_pagan_reformed }
					has_religion_features = no # Old saves, and campaigns without HF, need the Fylkirate to continue working
				}
			}
			NOT = { is_government_potential = tibetan_feudal_government }
		}
		
		allow = {
			is_patrician = no
			
			NOR = {
				is_government_potential = roman_imperial_government
				is_government_potential = order_government
				is_government_potential = sacred_confederacy_government
				is_government_allowed = theocracy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
		}

		barons_need_dynasty = yes
		can_build_tribal = no
		dukes_called_kings = yes
		uses_piety_for_law_change = yes

		capital_move_delay = 600

		## Modifiers
		court_size_modifier = 10
	}

	tibetan_feudal_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			TEMPLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			muslim_government
			theocracy_government
			feudal_government
			chinese_imperial_government
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
		}

		frame_suffix = "_tibetanfeudal"
		color = { 207 145 90 }

		potential = {
			culture_group = tibetan_group
			higher_real_tier_than = BARON
			is_patrician = no

			OR = {
				religion_openly_bon_or_reformed_trigger = yes
				religion = buddhist
			}
		}

		allow = {
			NOR = {
				is_government_potential = roman_imperial_government
				is_government_potential = order_government
				is_government_potential = sacred_confederacy_government
				is_government_allowed = theocracy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
		}

		barons_need_dynasty = yes
		can_build_tribal = no
		dukes_called_kings = yes
		uses_piety_for_law_change = yes

		capital_move_delay = 600

		## Modifiers
		court_size_modifier = 10
	}

	chinese_imperial_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			TEMPLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			feudal_government
			muslim_government
			theocratic_feudal_government
		}
		free_revoke_on_tiers = {
			DUKE
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
			confucian_bureaucracy
		}
		forced_contract = {
			confucian_bureaucracy
		}

		frame_suffix = "_chineseimperial"
		title_prefix = "chineseimperial_"
		color = { 183 135 39 }

		potential = {
			higher_tier_than = DUKE
		}

		allow = {
			always = no # disabled, as for now
			is_patrician = no
			
			trigger_if = {
				limit = {
					NOT = { has_title_flag = adopted_chinese_tradition }
				}
				is_save_game = no
				has_game_started = no
			}
			trigger_else = {
				has_title_flag = adopted_chinese_tradition
			}
			
			NOR = {
				is_government_potential = roman_imperial_government
				is_government_potential = order_government
				is_government_potential = sacred_confederacy_government
				is_government_allowed = theocracy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
		}

		barons_need_dynasty = yes
		can_build_tribal = no
		can_create_empires = no
		can_create_kingdoms = no
		can_demand_religious_conversion = no
		can_grant_kingdoms_and_empires_to_other_government = no
		can_usurp_kingdoms_and_empires = no
		free_retract_vassalage = yes
		gets_religion_opinion_penalties = no
		gives_religion_opinion_penalties = no
		marriage_ignore_religion = yes
		vassal_government_opinion_penalties = no
		have_gender_laws = no

		capital_move_delay = 2000 # Reluctant to move

		## Modifiers
		character_modifier = {
		}

		court_size_modifier = 15
	}
	
	confucian_bureaucracy = {
		#offmap_power = offmap_china
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			#CASTLE
			#CITY
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			#TRIBAL
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
		}

		frame_suffix = "_confucian"
		title_prefix = "confucian_"
		color = { 94 187 185 }

		potential = {
			higher_real_tier_than = BARON
			OR = {
				AND = {
					top_liege = {
						OR = {
							government = chinese_imperial_government
							liege_before_war = {
								government = chinese_imperial_government
							}
						}
					}
					liege_before_war = {
						OR = {
							government = chinese_imperial_government
							government = confucian_bureaucracy
						}
					}
					independent = no
				}
				is_offmap_tag = offmap_china
			}
			
			trigger_if = {
				limit = {
					higher_real_tier_than = COUNT
					has_game_started = yes
				}
				OR = {
					primary_title = {
						is_vice_royalty = yes
					}
					is_offmap_tag = offmap_china
				}
			}
		}
		
		allow = {
			is_patrician = no
			
			NOR = {
				is_government_allowed = theocracy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
		}

		can_create_empires = no
		can_create_kingdoms = no
		can_be_granted_kingdoms_and_empires_by_other_government = no
		can_build_tribal = no
		can_demand_religious_conversion = no
		can_imprison_without_reason = no
		can_inherit = no
		can_revoke_without_reason = no
		gets_religion_opinion_penalties = no
		vassal_government_opinion_penalties = no

		capital_move_delay = 600
		#aggression = 0 # AI only attacks by script

		## Modifiers
		court_size_modifier = 10
	}

	order_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			TEMPLE
			TRIBAL
			FORT
			HOSPITAL
		}
		accepts_liege_governments = {
			feudal_government
			muslim_government
			theocracy_government
			theocratic_feudal_government
			chinese_imperial_government
		}
		free_revoke_on_governments = {
			order_government
		}
		free_revoke_on_tiers = {
			BARON
		}
		forced_contract = {
			order_government
		}

		frame_suffix = "_order"
		title_prefix = "order_"
		color = { 169 169 169 }

		potential = {
			trigger_if = {
				limit = { holy_order = no }

				ai = yes

				any_liege = {
					holy_order = yes
					religion = ROOT
				}

				NOR = {
					is_government_potential = merchant_republic_government
					trigger_if = {
						limit = {
							is_offmap_governor = yes
						}
						governor_title = {
							is_primary_type_title = yes
						}
					}
				}
			}
		}

		barons_need_dynasty = yes
		can_be_granted_kingdoms_and_empires_by_other_government = no
		can_create_kingdoms = no
		can_create_empires = no
		can_grant_kingdoms_and_empires_to_other_government = no
		can_inherit = no
		can_imprison_without_reason = no
		can_revoke_without_reason = no
		can_usurp_kingdoms_and_empires = no
		dukes_called_kings = yes
		free_retract_vassalage = yes
		have_gender_laws = no
	}

	roman_imperial_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			CITY
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			feudal_government
			republic_government
			merchant_republic_government
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
		}

		frame_suffix = "_romanimperial"
		color = { 143 12 125 }

		potential = {
			primary_title = {
				OR = {
					title = e_byzantium
					title = e_roman_empire
				}
			}
		}

		allow = {
			primary_title = {
				trigger_if = {
					limit = {
						NOT = { has_law = succ_byzantine_elective }
					}

					is_save_game = no
					has_game_started = no
				}
			}
		}

		barons_need_dynasty = yes
		can_be_granted_kingdoms_and_empires_by_other_government = no
		can_build_tribal = no
		can_create_empires = no
		can_grant_kingdoms_and_empires_to_other_government_group = yes
		can_imprison_without_reason = no
		can_usurp_kingdoms_and_empires = no
		free_retract_vassalage = yes
		vassal_government_opinion_penalties = no

		capital_move_delay = 2000

		## Modifiers
		court_size_modifier = 15
	}
	
	sacred_confederacy_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			feudal_government
			republic_government
			merchant_republic_government
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
		}

		#frame_suffix = "_sacredimperial"
		color = { 91 133 207 }

		potential = {
			offmap_hre = {
				governor = {
					character = PREVPREV
				}
				has_status = hre_shattered
			}
		}

		allow = {}

		barons_need_dynasty = yes
		can_be_granted_kingdoms_and_empires_by_other_government = no
		can_build_tribal = no
		can_create_empires = no
		can_grant_kingdoms_and_empires_to_other_government_group = yes
		can_usurp_kingdoms_and_empires = no

		capital_move_delay = 600

		## Modifiers
		court_size_modifier = 10
	}
	
	secular_feudal_government = {
		preferred_holdings = {
			CASTLE
		}
		allowed_holdings = {
			CASTLE
			TEMPLE
			FORT
			HOSPITAL
		}
		allowed_holdings_culture = { # Will not get the wrong government type penalty for tribes of the same culture
			TRIBAL
		}
		accepts_liege_governments = { # Gets the wrong religion modifier instead
			muslim_government
			theocratic_feudal_government
			chinese_imperial_government
		}
		free_revoke_on_governments_religion = { # Tribal vassals of other religions can have their titles revoked for free
			tribal_government
		}
		ignore_in_vassal_limit_calculation = {
			tribal_government
		}

		frame_suffix = "_secularfeudal"
		color = { 7 143 180 }

		potential = {
			higher_tier_than = BARON
			OR = {
				# Christian without head e.g Cathar, Waldensian, Lollard, Messalian, Bogomilist and 769 start Orthodox.
				AND = {
					religion_group = christian
					OR = {
						religion = cathar
						religion = waldensian
						religion = lollard	# To be subdivided later
						religion = messalian
						religion = iconoclast	# To be subdivided later
						religion = bogomilist
					}
				}
				# Eastern religion but hindu
				AND = {
					religion_group = indian_group
					NOT = { religion = hindu }
				}
				# Mazdaki
				AND = {
					religion_group = zoroastrian_group
					religion = mazdaki
				}
			}
			#religion_allows_female_temple_holders = yes
			NOT = {
				is_government_potential = insular_feudal_government
			}
		}
		
		allow = {
			is_patrician = no
			
			NOR = {
				is_government_potential = roman_imperial_government
				is_government_potential = order_government
				is_government_potential = sacred_confederacy_government
				is_government_allowed = theocracy_government
				trigger_if = {
					limit = {
						is_offmap_governor = yes
					}
					governor_title = {
						is_primary_type_title = yes
					}
				}
			}
		}

		barons_need_dynasty = yes
		can_build_tribal = no
		dukes_called_kings = yes
		uses_piety_for_law_change = yes

		capital_move_delay = 600

		## Modifiers
		court_size_modifier = 10
	}
}